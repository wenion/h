{% extends "h:templates/layouts/kmass-account_user_event.html.jinja2" %}

{% set page_route = 'account_user_event' %}
{% set page_title = 'User Event' %}

{% block page_content %}
  <div class="js-kmass">
    <div class="header">
      <label> page size
        <select class="pageSize" name="pageSize" data-ref="pageSizeSelect">
          {% if query and query.page_size == 10 %}
            <option value="10" selected>10</option>
          {% else %}
            <option value="10">10</option>
          {% endif %}
          {% if query.page_size == 25 %}
            <option value="25" selected>25</option>
          {% else %}
            <option value="25">25</option>
          {% endif %}
          {% if query.page_size == 50 %}
            <option value="50" selected>50</option>
          {% else %}
            <option value="50">50</option>
          {% endif %}
          {% if query.page_size == 100 %}
            <option value="100" selected>100</option>
          {% else %}
            <option value="100">100</option>
          {% endif %}
          {% if query.page_size == "all" %}
            <option value="all" selected>all</option>
          {% else %}
            <option value="all">all</option>
          {% endif %}
        </select>
      </label>

      <label> sortby
        <select class="sortby" name="sortby" data-ref="sortbySelect">
          {% for field in values %}
            {% if query and query.sortby == field[0] %}
              <option value={{ field[0] }} selected>{{ field[1] }}</option>
            {% else %}
              <option value={{ field[0] }}>{{ field[1] }}</option>
            {% endif %}
          {% endfor %}
        </select>
      </label>

      <label> order
        <select class="order" name="order" data-ref="orderSelect">
          {% if query and query.order == "desc" %}
            <option value="desc" selected>DESC</option>
          {% else %}
            <option value="desc">DESC</option>
          {% endif %}
          {% if query and query.order == "asc" %}
            <option value="asc" selected>ASC</option>
          {% else %}
            <option value="asc">ASC</option>
          {% endif %}
        </select>
      </label>

      <form action="/account/user-event" method="post">
        <input type="submit" value="Export" />
      </form>
    </div>
    <div class="search-results" style="margin-top: 25px">

      <table class="search-results__list">
        <thead style="color: #fff;background-color: #333;">
          <tr>
            {% for field in table_head %}
            <th>
              {{ field }}
            </th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for table_row in table_results %}
            <tr>
              {% for key in table_row %}
                {% if table_row['id'] % 2 == 0 %}
                  <td class="kmass-tooltip">{{ max_display(table_row[key], 50) }}
                  <span class="kmass-tooltiptext">{{ table_row[key] }}</span></td>
                {% else %}
                  <td style="background: #e5e7eb" class="kmass-tooltip">{{ max_display(table_row[key], 50) }}
                  <span class="kmass-tooltiptext">{{ table_row[key] }}</span></td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
      {% if page.max > 1 %}
        {% include "h:templates/includes/kmass-paginator.html.jinja2" %}
      {% endif %}
    </div>
  </div>
{% endblock page_content %}
